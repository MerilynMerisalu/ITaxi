@page "/ridetimes/create"
@using ITaxi.Service
@using Public.App.DTO.v1.DriverArea
@using Webapp.ViewModels
@inject RideTimeService service
@inject ScheduleService scheduleService
@inject NavigationManager nav
@inject ISnackbar snackbar
<h3>Create</h3>
<div class="row">
    <div class="col-md-4">
        <EditForm Model="@vm" OnValidSubmit="Submit">
            <FluentValidationValidator></FluentValidationValidator>
            <ValidationSummary style="color:red"></ValidationSummary>
            <MudSelect @bind-Value="@vm.Schedule" For="@(() => vm.Schedule)" Label="Schedule" Placeholder="Please Select a Schedule" AnchorOrigin="Origin.CenterCenter">
                @if (Schedules != null)
                {
                    foreach (var option in Schedules)
                    {
                        <MudSelectItem Value="@option">@option?.ShiftDurationTime</MudSelectItem>
                    }
                }

            </MudSelect>
            @* <MudSelect T="DriverLicenseCategory" @bind-SelectedValues="@vm.SelectedDriverLicenseCategories" MultiSelection="true"
                       MultiSelectionTextFunc="@(GetMultiSelectionText)"
                       For="@( () => vm.DriverLicenseCategoriesForValidation)"
                       Label="Driver License Categories" Placeholder="Please select driver license categories"
                       AnchorOrigin="Origin.CenterCenter">
                @if (DriverLicenseCategories != null)
                {
                    foreach (var options in DriverLicenseCategories)
                    {
                        <MudSelectItem T="DriverLicenseCategory" Value="@options">@options?.DriverLicenseCategoryName</MudSelectItem>

                    }
                }

            </MudSelect> *@
            <p>
                <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" EndIcon="@Icons.Material.Filled.Send" Color="Color.Primary">Create</MudButton>
            </p>
        </EditForm>
        </div>
        </div>
@code {
    public CreateRideTimeViewModel vm { get; set; } = new CreateRideTimeViewModel();
    public IEnumerable<Schedule?>? Schedules { get; set; }
    public IEnumerable<RideTime?>? RideTimes { get; set; }
    protected override async Task OnInitializedAsync()
    {
        Schedules = (await scheduleService.GetAllSchedulesAsync()).ToList();
    }

    public async Task Submit()
    {
        
    }
}
