@using Base.Resources
@using App.Enum.Enum
@model WebApp.Areas.AdminArea.ViewModels.CreateEditVehicleViewModel

<div class="form-group">
    <label asp-for="DriverId" class="control-label"></label>
    <select asp-for="DriverId" class="form-control" asp-items="@Model.Drivers">
        <option value="">@Common.PleaseSelect</option>
    </select>
</div>
<div class="form-group">
    <label asp-for="VehicleTypeId" class="control-label"></label>
    @*<select asp-for="VehicleTypeId" class="form-control" />
        <option value="">@Common.PleaseSelect</option>
    </select>*@
    <select id="VehicleTypeId" class="form-control" onchange="showHideCheckBox()">
        <option value="">@Common.PleaseSelect</option>
        @foreach (var option in Model.VehicleTypes)
        {
            <option value="@option.Id" data-is-wheelchair="@(option.IsWheelChair ? "1" : "0")">@option.VehicleTypeName</option>
            
        }
    </select>
    @Html.HiddenFor(v => v.SelectedVehicleTypeId, new { vehicleTypeId = "SelectedVehicleTypeId" })
    @*



    <select class="form-control" onchanged="updateVehicleType()">
        <option value="">Please Select</option>
        <option value="0000-000" data-is-wheelchair="0">Regular</option>
        <option value="0000-001" data-is-wheelchair="1">...</option>
    </select>
    
    function updateVehicleType() {
        // get the select list
        // get the selected value
        // look at the data-is-wheelchair attribute
        // if (is 1) { show checkbox }
        // else { hide checkbox }
    }


*@
</div>
<div class="form-group">
    <label asp-for="VehicleMarkId" class="control-label"></label>
    <select asp-for="VehicleMarkId" class="form-control" asp-items="Model.VehicleMarks"
            onchange="VehicleMarkIdChanged(this.value)">
        <option value="">@Common.PleaseSelect</option>
    </select>
</div>
<div class="form-group">
    <label asp-for="VehicleModelId" class="control-label"></label>
    <select asp-for="VehicleModelId" class="form-control" asp-items="Model.VehicleModels">
        <option value="">@Common.PleaseSelect</option>
    </select>
</div>
<div class="form-group">
    <label asp-for="VehiclePlateNumber" class="control-label"></label>
    <input asp-for="VehiclePlateNumber" class="form-control"/>
    <span asp-validation-for="VehiclePlateNumber" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="ManufactureYear" class="control-label"></label>
    <select asp-for="ManufactureYear" class="form-control" asp-items="Model.ManufactureYears">
        <option value="">@Common.PleaseSelect</option>
    </select>
    <span asp-validation-for="ManufactureYear" class="text-danger"></span>
</div>
<div class="form-group">
    <label asp-for="NumberOfSeats" class="control-label"></label>
    <input asp-for="NumberOfSeats" class="form-control" min="2" max="6"/>
    <span asp-validation-for="NumberOfSeats" class="text-danger"></span>
</div>
<div style="display: none" class="form-group form-check" id="DoesElectricWheelchairFitInVehicleDiv">
    <label class="form-check-label">
        <input id="DoesElectricWheelchairFitInVehicle" class="form-check-input" asp-for="DoesElectricWheelchairFitInVehicle" onchange="showHidePickUpTextBox()" />  @Html.DisplayNameFor(model => model.DoesElectricWheelchairFitInVehicle)
    </label>
</div>
<div class="form-group">
    <label asp-for="VehicleAvailability" class="control-label"></label>
    <select asp-for="VehicleAvailability" class="form-control" asp-items="Html.GetEnumSelectList<VehicleAvailability>()">
        <option value="">@Common.PleaseSelect</option>
    </select>
    <span asp-validation-for="VehicleAvailability" class="text-danger"></span>
</div>

<script type="text/javascript">
    function showHideCheckBox() {
        console.log("test");
        const vehicleTypeSelectList = document.getElementById("VehicleTypeId");
        const vehicleTypeOption = vehicleTypeSelectList.options[vehicleTypeSelectList.selectedIndex];
        console.log(vehicleTypeOption);
        const isWheelChair = vehicleTypeOption.getAttribute("data-is-wheelchair");
        const DoesElectricWheelchairFitInVehicleDiv = document.getElementById("DoesElectricWheelchairFitInVehicleDiv");
        let vehicleTypeIdValue;
        if (isWheelChair == "1") {
            DoesElectricWheelchairFitInVehicleDiv.style.display = "block";
            return vehicleTypeIdValue = document.getElementById("SelectedVehicleTypeId").value = vehicleTypeOption.value;
        } else {
            DoesElectricWheelchairFitInVehicleDiv.style.display = "none";
            return document.getElementById('SelectedVehicleTypeId').value = vehicleTypeOption.value;

        }
    }
</script>